The complete upgraded code for the files is provided above.